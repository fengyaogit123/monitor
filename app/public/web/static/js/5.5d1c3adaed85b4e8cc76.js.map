{"version":3,"sources":["webpack:///./src/pages/log/itemLog.js","webpack:///src/pages/log/index.vue","webpack:///./src/pages/log/columns.js","webpack:///./src/pages/log/index.vue?09dd","webpack:///./src/pages/log/index.vue"],"names":["itemLog","name","props","row","type","Object","default","render","h","arguments","this","actions","errorInfo","JSON","parse","utils","is","Array","e","class","browserName","wxName","route","url","style","attrs","errorDetails","split","map","item","time","target","log","ItemLog","width","_ref","align","title","key","_ref2","IOS","Android","PC","phoneSystemType","size","_ref3","browserVer","_ref4","phoneSystemVer","_ref5","Date","createdAt","Format","showList","pageNo","resetFields","_this","params","data","rows","undefined","_data$rows","count","_this2","regenerator_default","a","wrap","_context2","pages_log","_vm","_h","$createElement","_c","_self","id","bgColor","ref","slot","inline","model","label","prop","staticClass","placeholder","value","callback","$$v","$set","expression","_v","on","click","$event","deletes","reset","border","columns","on-selection-change","selectChange","total","page-size","show-elevator","current","show-total","update:current","on-change","pageChange","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.5d1c3adaed85b4e8cc76.js","sourcesContent":["import utils from \"@/utils/utils\";\r\nexport default {\r\n    name: 'ItemLog',\r\n    props: {\r\n        row: {\r\n            type: Object,\r\n            default() { return {} }\r\n        }\r\n    },\r\n    render() {\r\n        let row = this.row;\r\n        let Alert = \"Alert\";\r\n        let actions = row.errorInfo||row.actions;\r\n        try {\r\n            actions = JSON.parse(actions);\r\n            if (!utils.is().Array(actions)) {\r\n                actions = [];\r\n            }\r\n        } catch (e) {\r\n            actions = actions ? [] : [];\r\n        }\r\n        return (\r\n            <div>\r\n                <h3 class=\"text14\">浏览器信息：</h3>\r\n                <div class=\"text14\">{row.browserName}</div>\r\n                <br />\r\n                <h3 class=\"text14\">用户信息：</h3>\r\n                <div class=\"text14\">{row.wxName}</div>\r\n                <br />\r\n                <h3 class=\"text14\">路由或API：</h3>\r\n                <div class=\"text14\">{row.route}</div>\r\n                <br />\r\n                <h3 class=\"text14\">url信息：</h3>\r\n                <div class=\"text14\">{row.url}</div>\r\n                <br />\r\n                <h3 class=\"text14\">堆栈信息：</h3>\r\n                <Alert style=\"width:700px\" type=\"error\">\r\n                    {row.errorDetails.split(\"\\n\").map(item => {\r\n                        return <p>{item}</p>;\r\n                    })}\r\n                </Alert>\r\n                <br />\r\n                <h3 class=\"text14\">操作信息：</h3>\r\n                <div style=\"width:700px\">\r\n                    {actions.map(item => {\r\n                        return (\r\n                            <Alert type=\"success\" class=\"text14\">\r\n                                【{item.time}】 {item.type} {item.target}\r\n                            </Alert>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/log/itemLog.js","<template>\r\n    <FyLayout id=\"Log\" bgColor=\"#fff\">\r\n        <!-- 日志监控-->\r\n        <SearchBox>\r\n            <Form inline ref=\"form\" :model=\"params\" slot=\"left\">\r\n                <Row>\r\n                    <FormItem label=\"项目\" prop=\"itemID\">\r\n                        <Input v-model=\"params.itemID\" class=\"w200\" placeholder=\"请输入项目ID\"></Input>\r\n                    </FormItem>\r\n                    <FormItem label=\"用户名\" prop=\"userName\">\r\n                        <Input v-model=\"params.userName\" class=\"w200\" placeholder=\"请输入用户名\"></Input>\r\n                    </FormItem>\r\n                </Row>\r\n            </Form>\r\n            <Row slot=\"right\">\r\n                <Button type=\"primary\" @click=\"showList()\">查询</Button>\r\n                <Button type=\"error\" @click=\"deletes()\">删除</Button>\r\n                <Button type=\"ghost\" @click=\"reset()\">重置</Button>\r\n\r\n            </Row>\r\n        </SearchBox>\r\n        <Table border :columns=\"columns\" @on-selection-change=\"selectChange\" :data=\"data\"></Table>\r\n        <!--分页-->\r\n        <Block align=\"right\">\r\n            <Page :total=\"count\" :page-size=\"params.size\" show-elevator :current.sync=\"params.pageNo\" show-total @on-change=\"pageChange\"></Page>\r\n        </Block>\r\n    </FyLayout>\r\n</template>\r\n\r\n<script>\r\nimport { Log } from \"@/service\";\r\nimport ItemLog from \"./itemLog.js\";\r\nimport columns from \"./columns\";\r\nimport { stringify } from \"querystring\";\r\nexport default {\r\n  name: \"Log\",\r\n  components: { ItemLog },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      data: [],\r\n      count: 0,\r\n      params: {\r\n        pageNo: 1, //当前页\r\n        size: 20 //每页记录数\r\n      },\r\n      rows: [],\r\n      columns: columns.call(this, ItemLog)\r\n    };\r\n  },\r\n  created() {\r\n    this.showList();\r\n  },\r\n  methods: {\r\n    pageChange(pageNo) {\r\n      this.params.pageNo = pageNo;\r\n      this.showList();\r\n    },\r\n    //重置\r\n    reset() {\r\n      this.$refs.form.resetFields();\r\n    },\r\n    async showList() {\r\n      const { data } = await Log.get(this.params);\r\n      let { rows = [], count } = data;\r\n      this.data = rows;\r\n      this.count = count;\r\n      this.$Message.success('加载完成')\r\n    },\r\n    selectChange(rows) {\r\n      this.rows = rows;\r\n    },\r\n    async deletes() {\r\n      this.$Modal.confirm({\r\n        title: \"提示\",\r\n        content: \"是否确认删除？\",\r\n        onOk: async () => {\r\n          await Log.delete({\r\n            ids: this.rows.map(({ _id }) => _id)\r\n          });\r\n          this.$Message.success(\"删除成功!\");\r\n          this.showList();\r\n        },\r\n        onCancel: () => {}\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.errorDec .ivu-form-item {\r\n  margin-bottom: 0;\r\n}\r\n.text14 {\r\n  font-size: 14px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/log/index.vue","export default function (ItemLog) {\r\n    return [\r\n        {\r\n            type: \"expand\",\r\n            width: 50,\r\n            render: (h, { row }) => {\r\n                return <ItemLog row={row} />;\r\n            }\r\n        },\r\n        {\r\n            type: \"selection\",\r\n            width: 60,\r\n            align: \"center\"\r\n        },\r\n        {\r\n            title: \"设备\",\r\n            key: \"phoneSystemType\",\r\n            align: \"center\",\r\n            render: (h, { row }) => {\r\n                let Icon = \"Icon\";\r\n                let type = {\r\n                    IOS: \"social-apple\",\r\n                    Android: \"social-android\",\r\n                    PC: \"android-desktop\"\r\n                }[row.phoneSystemType || \"PC\"];\r\n                return type ? <Icon size={30} type={type} /> : \"\";\r\n            }\r\n        },\r\n        {\r\n            title: \"错误信息\",\r\n            key: \"details\",\r\n            align: \"center\",\r\n            width: 400\r\n        },\r\n        {\r\n            title: \"ip\",\r\n            key: \"userIP\",\r\n            align: \"center\"\r\n        },\r\n        {\r\n            title: \"用户名称\",\r\n            key: \"userName\",\r\n            align: \"center\"\r\n        },\r\n        {\r\n            title: \"浏览器\",\r\n            key: \"browserName\",\r\n            align: \"center\",\r\n            render: (h, { row }) => {\r\n                return `${row.browserName} ${row.browserVer}`;\r\n            }\r\n        },\r\n        {\r\n            title: \"系统\",\r\n            key: \"phoneSystemVer\",\r\n            align: \"center\",\r\n            render: (h, { row }) => {\r\n                return `${row.phoneSystemType} ${row.phoneSystemVer}`;\r\n            }\r\n        },\r\n        {\r\n            title: \"上报时间\",\r\n            key: \"createdAt\",\r\n            align: \"center\",\r\n            render:(h,{ row })=>{\r\n                return new Date(row.createdAt).Format('yyyy-MM-dd hh:mm:ss')\r\n            }\r\n        }\r\n    ]\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/log/columns.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('FyLayout',{attrs:{\"id\":\"Log\",\"bgColor\":\"#fff\"}},[_c('SearchBox',[_c('Form',{ref:\"form\",attrs:{\"slot\":\"left\",\"inline\":\"\",\"model\":_vm.params},slot:\"left\"},[_c('Row',[_c('FormItem',{attrs:{\"label\":\"项目\",\"prop\":\"itemID\"}},[_c('Input',{staticClass:\"w200\",attrs:{\"placeholder\":\"请输入项目ID\"},model:{value:(_vm.params.itemID),callback:function ($$v) {_vm.$set(_vm.params, \"itemID\", $$v)},expression:\"params.itemID\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"用户名\",\"prop\":\"userName\"}},[_c('Input',{staticClass:\"w200\",attrs:{\"placeholder\":\"请输入用户名\"},model:{value:(_vm.params.userName),callback:function ($$v) {_vm.$set(_vm.params, \"userName\", $$v)},expression:\"params.userName\"}})],1)],1)],1),_vm._v(\" \"),_c('Row',{attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.showList()}}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"error\"},on:{\"click\":function($event){_vm.deletes()}}},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"ghost\"},on:{\"click\":function($event){_vm.reset()}}},[_vm._v(\"重置\")])],1)],1),_vm._v(\" \"),_c('Table',{attrs:{\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.data},on:{\"on-selection-change\":_vm.selectChange}}),_vm._v(\" \"),_c('Block',{attrs:{\"align\":\"right\"}},[_c('Page',{attrs:{\"total\":_vm.count,\"page-size\":_vm.params.size,\"show-elevator\":\"\",\"current\":_vm.params.pageNo,\"show-total\":\"\"},on:{\"update:current\":function($event){_vm.$set(_vm.params, \"pageNo\", $event)},\"on-change\":_vm.pageChange}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2fcc513e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/log/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2fcc513e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2fcc513e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/log/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}